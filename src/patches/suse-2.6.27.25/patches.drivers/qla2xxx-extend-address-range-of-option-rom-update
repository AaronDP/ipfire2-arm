From 7bb61cdff8715631deda859443d3a6650a1bbb28 Mon Sep 17 00:00:00 2001
From: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date: Mon, 16 Feb 2009 07:27:09 -0800
Subject: qla2xxx: Extend address range of option-rom update for recent ISPs
References: bnc#476206

Please consider this correction to option-rom 
update handling.  The issue is that applications will need
to update a larger address-range of the flash than was previously
allowed with earlier ISP parts.

This will be important for customers such as IBM and HPQ to
allow their end-users to enable multi-queue facilities within
the field with inbox SLES11 drivers.

Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
Signed-off-by: Hannes Reinecke <hare@suse.de>

---
 drivers/scsi/qla2xxx/qla_attr.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/drivers/scsi/qla2xxx/qla_attr.c b/drivers/scsi/qla2xxx/qla_attr.c
index 34c4016..ef9146f 100644
--- a/drivers/scsi/qla2xxx/qla_attr.c
+++ b/drivers/scsi/qla2xxx/qla_attr.c
@@ -295,8 +295,7 @@ qla2x00_sysfs_write_optrom_ctl(struct kobject *kobj,
 		else if (start == (ha->flt_region_boot * 4) ||
 		    start == (ha->flt_region_fw * 4))
 			valid = 1;
-		else if (IS_QLA25XX(ha) &&
-		    start == (ha->flt_region_vpd_nvram * 4))
+		else if (IS_QLA25XX(ha))
 		    valid = 1;
 		if (!valid) {
 			qla_printk(KERN_WARNING, ha,
-- 
1.6.0.4.781.gf2070

