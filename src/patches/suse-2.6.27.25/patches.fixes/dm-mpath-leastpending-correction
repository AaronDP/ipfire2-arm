From: Vijayakumar Balasubramanian <vijayakumar@hp.com>
Subject: Path selector fix to dm-least-pending
References: bnc#444199

We found that the lpp path selector had a small logical
problem causing this issue. Attached patch would solve the issue.

Signed-off-by: Hannes Reinecke <hare@suse.de>

diff --git a/drivers/md/dm-least-pending.c b/drivers/md/dm-least-pending.c
index a85bc90..c3ee548 100644
--- a/drivers/md/dm-least-pending.c
+++ b/drivers/md/dm-least-pending.c
@@ -194,7 +194,7 @@ static struct dm_path *lpp_select_path(struct path_selector *ps,
 		return NULL;
 
        atomic_inc(&least_io_path->io_count);
-       *repeat_count = pi->repeat_count;
+       *repeat_count = least_io_path->repeat_count;
 
        return least_io_path->path;
 }
