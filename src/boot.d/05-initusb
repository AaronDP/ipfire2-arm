#!/bin/sh
# Initialize USB controllers
echo "Initializing USB controllers"
aliases=`/sbin/modprobe -c | awk '/^alias usb-controller/ { print $3 }'`
if [ -n "$aliases" -a "$aliases" != "off" ] ; then
    modprobe usbcore
    mount -n -t usbdevfs usbdevfs /proc/bus/usb
    for alias in $aliases ; do
        [ "$alias" != "off" ] && modprobe $alias
    done

    echo "Initializing USB storage devices"
    modprobe usb-storage
    modprobe sd_mod

    echo "Initializing USB keyboard"
    modprobe hid
    modprobe keybdev

    echo "Initializing USB modems"
    modprobe acm
fi
