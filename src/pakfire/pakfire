#!/bin/bash
############################################################################################
# Version 0.1a, Copyright (C) 2006  by IPFire.org						  #
# IPFire ist freie Software, die Sie unter bestimmten Bedingungen weitergeben dürfen.      #
############################################################################################

. /etc/pakfire.conf

case "$1" in
	update)
			. $PAKHOME/lib/get_mirror.sh
			. $PAKHOME/lib/get_list.sh
			. $PAKHOME/lib/check_pak.sh
			get_mirror
			get_list
			check_pak
	;;

	upgrade)
			. $PAKHOME/lib/get_upgrade.sh
			. $PAKHOME/lib/get_base.sh
			get_upgrade
			get_base
	;;

	install)
		. $PAKHOME/lib/get_pak.sh
		. $PAKHOME/lib/install_pak.sh
		case "$2" in
			"")
				pakfire_logger "No package name given. Exiting..."
			;;
			BASE-*)
				echo $2
			;;
			*)
				if [ -e $DB_DIR/$2 ]; then
					if [ -e $IP_DIR/$2 ]; then
						pakfire_logger "$2 is already installed on this system."
					else
						get_pak $2
						install_pak $2
						rm -rf $TMP_DIR/*
					fi
				else
					pakfire_logger "There is no paket with this name: $2"
				fi
			;;
		esac
	;;

	clean)
		rm -rf $CACHE_DIR/* $TMP_DIR/* $DB_DIR/*
	;;
	*)
		echo -e "IPFire - Pakfire $PAKVER:"
		echo -e "===\t===\t===\t===\t===\t===\t===\t==="
		echo -e "pakfire install [packet]\t- Installs a new packet."
		echo -e "pakfire remove [paket]\t\t- Uninstalls a paket."
		echo -e "pakfire update\t\t\t- Reloads the package list."
		echo -e "pakfire upgrade\t\t\t- Searches for new updates."
		echo -e "===\t===\t===\t===\t===\t===\t===\t==="
	;;

esac

################################### EOF ####################################################
