#!/bin/sh
########################################################################
# Begin
#
# Description : DHCP Client Script
#
# Authors     : Michael Tremer - mitch@ipfire.org
#
# Version     : 01.00
#
# Notes       : 
#
########################################################################

. /etc/sysconfig/rc 
. ${rc_functions}

eval $(/usr/local/bin/readhash "$1")
case "$2" in
	up)
		logger -p local0.info -t dhcpcd.exe[$$] "${INTERFACE} has been configured with old IP=${IPADDR}"
		touch /var/ipfire/red/active
		run_subdir ${rc_base}/init.d/networking/red.up/
		;;
	new)	
		logger -p local0.info -t dhcpcd.exe[$$] "${INTERFACE} has been configured with new IP=${IPADDR}"
		[ -e "/var/ipfire/red/active" ] || touch /var/ipfire/red/active
		run_subdir ${rc_base}/init.d/networking/red.down/
		run_subdir ${rc_base}/init.d/networking/red.up/
		;;
	down)
		logger -p local0.info -t dhcpcd.exe[$$] "${INTERFACE} has been brought down"
		rm -f /var/ipfire/red/active
		run_subdir ${rc_base}/init.d/networking/red.down/
		;;
esac

# End
